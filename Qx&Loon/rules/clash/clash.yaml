###############################################################
## 配置文件需要放置在 $HOME/.config/clash/*.yaml
## 这份文件是clashX的基础配置文件，请尽量新建配置文件进行修改。
## ！！！只有这份文件的端口设置会随ClashX启动生效
## 如果您不知道如何操作，请参阅 官方Github文档 https://github.com/Dreamacro/clash/blob/dev/README.md
## 配置文件说明：https://lancellc.gitbook.io/clash/clash-config-file/an-example-configuration-file
###############################################################
mixed-port: 7890
allow-lan: false
bind-address: '*'
mode: rule
log-level: info

# >>>>>>>>>>>>>>>>>>>>>> DNS
dns:
    enable: true
    listen: 0.0.0.0:53
    enhanced-mode: fake-ip
    nameserver:
        - 94.140.14.14      # 拦截广告、跟踪和钓鱼
        - 117.50.11.11      # ONE-DNS拦截版 恶意网站拦截、广告过滤
        - 114.114.114.114   # 114DNS

# >>>>>>>>>>>>>>>>>>>>>> 代理节点
proxies:

# >>>>>>>>>>>>>>>>>>>>>> 代理节点提供商
# https://cdn.jsdelivr.net/gh/anaer/Sub@main/clash.yaml
# https://raw.githubusercontent.com/ssrsub/ssr/master/Surge.conf
# https://raw.githubusercontent.com/ssrsub/ssr/master/Clash.yml
# https://raw.githubusercontent.com/alanbobs999/TopFreeProxies/master/sub/sub_merge_yaml.yml
# https://raw.githubusercontent.com/Leon406/SubCrawler/main/sub/sub.yml
# https://cdn.jsdelivr.net/gh/v2raydy/Clash@main/02-22u2.yaml
# https://raw.githubusercontent.com/visiti/clash-node/main/clash-node.yaml
proxy-providers:
  All:
    type: http
    path: ./proxy_providers/proxy_providers_anaersub.yaml
    # url: https://api.v1.mk/sub?target=clash&url=https%3A%2F%2Fraw.githubusercontent.com%2Falanbobs999%2FTopFreeProxies%2Fmaster%2Fsub%2Fsub_merge.txt&insert=false&config=https%3A%2F%2Fraw.githubusercontent.com%2FMeilieage%2Fwebcdn%2Fmain%2Frule%2FArea_Media_NoAuto.ini&emoji=true&list=false&udp=false&tfo=false&expand=true&scv=false&fdn=false&new_name=true
    url: https://api.v1.mk/sub?target=clash&url=https%3A%2F%2Fcdn.jsdelivr.net%2Fgh%2Fanaer%2FSub%40main%2Fclash.yaml%7Chttps%3A%2F%2Fraw.githubusercontent.com%2Fssrsub%2Fssr%2Fmaster%2FSurge.conf%7Chttps%3A%2F%2Fraw.githubusercontent.com%2Fssrsub%2Fssr%2Fmaster%2FClash.yml%7Chttps%3A%2F%2Fraw.githubusercontent.com%2Falanbobs999%2FTopFreeProxies%2Fmaster%2Fsub%2Fsub_merge_yaml.yml%7Chttps%3A%2F%2Fraw.githubusercontent.com%2FLeon406%2FSubCrawler%2Fmain%2Fsub%2Fsub.yml%7Chttps%3A%2F%2Fcdn.jsdelivr.net%2Fgh%2Fv2raydy%2FClash%40main%2F02-22u2.yaml%7Chttps%3A%2F%2Fraw.githubusercontent.com%2Fvisiti%2Fclash-node%2Fmain%2Fclash-node.yaml%7Chttps%3A%2F%2Fraw.githubusercontent.com%2Fssrsub%2Fssr%2Fmaster%2FClash.yml%7Chttps%3A%2F%2Ffreemycloud.pw%2Fauth%2Fregister%3Fcode%3DYboa%7Chttps%3A%2F%2Fraw.githubusercontent.com%2Fssrsub%2Fssr%2Fmaster%2FSurge.conf%7Chttps%3A%2F%2Fraw.githubusercontent.com%2Fssrsub%2Fssr%2Fmaster%2Fssrsub%7Chttps%3A%2F%2Fraw.githubusercontent.com%2Fssrsub%2Fssr%2Fmaster%2Fv2ray%7Chttps%3A%2F%2Fraw.githubusercontent.com%2Fssrsub%2Fssr%2Fmaster%2Fss-sub
    interval: 3600
    health-check:
        enable: true
        url: http://www.apple.com/generate_204
        interval: 600
  中国节点:
    filter: 🇨🇳|中国|CN
    type: file
    path: ./proxy_providers/proxy_providers_anaersub.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204
  港台节点:
    filter: 🇭🇰|港|HK|Hong|台|TW|Tai
    type: file
    path: ./proxy_providers/proxy_providers_anaersub.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204
  日本节点:
    filter: 🇯🇵|日本|东京|JP|亚|新加坡|韩国|巴
    type: file
    path: ./proxy_providers/proxy_providers_anaersub.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204
  美国节点:
    filter: 🇺🇲|美|英|法|俄|德|付费|US|CA|DK|GB|非
    type: file
    path: ./proxy_providers/proxy_providers_anaersub.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204

# >>>>>>>>>>>>>>>>>>>>>> 代理组策略
proxy-groups:
  # 代理节点
  - name: 🤞🏻节点选择
    type: select
    use:
      - All
    proxies:
      - 🤞🏻自动
      - 🤞🏻负载
  - name: 🤞🏻中国
    type: url-test
    use: 
        - 中国节点
    url: http://www.gstatic.com/generate_204
    interval: 600
  - name: 🤞🏻自动
    type: url-test
    use: 
        - 港台节点
        - 日本节点
        - 美国节点
    url: http://www.gstatic.com/generate_204
    interval: 300
  - name: 🤞🏻负载
    type: fallback
    url: http://www.gstatic.com/generate_204
    interval: 300
    use: 
        - 港台节点
        - 日本节点
        - 美国节点

  # 代理规则组
  - name: 🗽国外网站
    type: select
    proxies:
      - 🤞🏻节点选择
      - 🤞🏻中国
      - DIRECT

  - name: 🇨🇳国内网站
    type: select
    proxies:
      - DIRECT
      - 🤞🏻中国
      - 🤞🏻节点选择

  - name: 🪧AdBlock
    type: select
    proxies:
      - REJECT

  - name: 🐟漏网之鱼
    type: select
    proxies:
      - DIRECT
      - 🤞🏻节点选择

# >>>>>>>>>>>>>>>>>>>>>> 规则提供商
rule-providers:
  # https://ghproxy.com/https://raw.githubusercontent.com/  https://gh.oevery.me/https://raw.githubusercontent.com
  ########################## 国外
  YouTube:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml"
    path: ./ruleset/YouTube.yaml
    interval: 86400
  Microsoft:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.yaml"
    path: ./ruleset/Microsoft.yaml
    interval: 86400
  PackageName:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/Infatuation-Fei/rule/main/Clash/Rule/Android_Package_Name_Proxy.yaml"
    path: ./ruleset/PackageName.yaml
    interval: 86400
  Global:
    type: http
    behavior: domain
    url: "https://ghproxy.com/https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/proxy.txt"
    path: ./ruleset/Global-Domain.yaml
    interval: 86400
  ########################## 国内
  Apple:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.yaml"
    path: ./ruleset/Apple.yaml
    interval: 86400
  China:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China.yaml"
    path: ./ruleset/China.yaml
    interval: 86400
  NetEaseMusic:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/NetEaseMusic/NetEaseMusic.yaml"
    path: ./ruleset/NetEaseMusic.yaml
    interval: 86400
  BiliBili:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml"
    path: ./ruleset/BiliBili.yaml
    interval: 86400
  Lan:
    type: http
    behavior: classical
    url: "https://ghproxy.com/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan.yaml"
    path: ./ruleset/lan.yaml
    interval: 86400
  ########################## 广告
  AdvertisingLite:
    type: http
    behavior: classical
    url: https://gh.oevery.me/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AdvertisingLite/AdvertisingLite.yaml
    path: ./ruleset/AdvertisingLite.yaml
    interval: 86400
  Advertising-Domain:
    type: http
    behavior: domain
    url: https://gh.oevery.me/https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/Clash/Advertising/Advertising_Domain.yaml
    path: ./ruleset/Advertising_Domain.yaml
    interval: 86400
  ZhihuAds:
    type: http
    behavior: classical
    url: https://gh.oevery.me/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ZhihuAds/ZhihuAds.yaml
    path: ./ruleset/ZhihuAds.yaml
    interval: 86400
  Privacy-Classical:
    type: http
    behavior: classical
    url: https://gh.oevery.me/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Privacy/Privacy_Classical.yaml
    path: ./ruleset/Privacy_Classical.yaml
    interval: 86400
  AdGuardSDNSFilter-Classical:
    type: http
    behavior: classical
    url: https://gh.oevery.me/https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AdGuardSDNSFilter/AdGuardSDNSFilter_Classical.yaml
    path: ./ruleset/AdGuardSDNSFilter_Classical.yaml
    interval: 86400
  LoyalsoldierReject:
    type: http
    behavior: domain
    url: https://gh.oevery.me/https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/reject.txt
    path: ./ruleset/LoyalsoldierReject.yaml
    interval: 86400
  RuleDomain:
    type: http
    behavior: classical
    url: https://gh.oevery.me/https://raw.githubusercontent.com/zhousanfu/rules_script/master/Qx%26Loon/rules/clash/RuleDomain.yaml
    path: ./ruleset/RuleDomain.yaml
    interval: 86400
  RuleClass:
    type: http
    behavior: classical
    url: https://gh.oevery.me/https://raw.githubusercontent.com/zhousanfu/rules_script/master/Qx%26Loon/rules/clash/RuleClass.yaml
    path: ./ruleset/RuleClass.yaml
    interval: 86400

# >>>>>>>>>>>>>>>>>>>>>> 规则
rules:
  # 广告
  - DOMAIN,gateway.icloud.co,DIRECT
  - RULE-SET,AdvertisingLite,🪧AdBlock
  - RULE-SET,Advertising-Domain,🪧AdBlock
  - RULE-SET,ZhihuAds,🪧AdBlock
  - RULE-SET,Privacy-Classical,🪧AdBlock
  - RULE-SET,AdGuardSDNSFilter-Classical,🪧AdBlock
  - RULE-SET,LoyalsoldierReject,🪧AdBlock
  - RULE-SET,RuleDomain,🪧AdBlock
  - RULE-SET,RuleClass,🪧AdBlock
  # 国外
  - RULE-SET,YouTube,🗽国外网站
  - RULE-SET,Microsoft,🗽国外网站
  - RULE-SET,PackageName,🗽国外网站
  - RULE-SET,Global,🗽国外网站
  # 国内
  - RULE-SET,Apple,🇨🇳国内网站
  - RULE-SET,NetEaseMusic,🇨🇳国内网站
  - RULE-SET,BiliBili,🇨🇳国内网站
  - RULE-SET,China,🇨🇳国内网站
  - RULE-SET,Lan,🇨🇳国内网站
  - GEOIP,CN,🇨🇳国内网站
  # 其它
  - MATCH,🐟漏网之鱼
